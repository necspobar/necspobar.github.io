<!DOCTYPE html>
<html lang="jp">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <title>liff_init</title>
</head>

<body>
    <div>liff_init_test</div>
    <div id="1"></div>
    <div id="2"></div>
    <p>2</p>
    <button id="openWindowButton">EXTERNAL WINDOW</button>
    <a href="http://www.google.com">GOOGLE</a>
    <button id="sendMessageButton">SendBTN</button>
    <script>
        // Promiseオブジェクトを使用する方法
        liff.init({
            liffId: "1655193965-8gxR9Y0p" // Use own liffId
        }).then(() => {
            // Start to use liff's api
            console.log(liff.getOS())
            document.getElementById("1").innerText = `
                ${liff.getOS()}
                ${liff.isInClient()}
                ${liff.getIDToken()}
            `
            liff.getProfile().then((res) => {
                document.getElementById("2").innerText = JSON.stringify(res);
            }).catch((err) => {
                document.getElementById("2").innerText = "ERROR2";
            })
        }).catch((err) => {
            // Error happens during initialization
            console.log(err.code, err.message);
        });
        // openWindow call
        document.getElementById('openWindowButton').addEventListener('click', function () {
            liff.openWindow({
                url: 'https://www.google.com',
                external: true
            });
        });
        // sendMessages call
        document.getElementById('sendMessageButton').addEventListener('click', function () {
            if (!liff.isInClient()) {
                sendAlertIfNotInClient();
            } else {
                liff.sendMessages([{
                    'type': 'text',
                    'text': "You've successfully sent a message! Hooray!"
                }]).then(function () {
                    window.alert('Message sent');
                }).catch(function (error) {
                    window.alert('Error sending message: ' + error);
                });
            }
        });
    </script>
</body>

</html>
